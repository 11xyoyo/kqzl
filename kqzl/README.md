# 空气质量监测系统

一个基于 UniApp 开发的智能空气质量监测应用，支持实时数据监测、历史数据分析和 AI 智能分析功能。

## 📱 功能特性

###  首页监测
- **实时数据显示**：温度、湿度、PM2.5、甲醛、VOC、紫外线、噪音等环境指标
- **AQI 空气质量指数**：自动计算并显示空气质量等级和建议
- **UVI 紫外线指数**：实时计算紫外线指数，提供防护建议
- **地图定位**：显示设备位置和历史轨迹
- **自动刷新**：每3秒自动更新数据

### 图表分析
- **多维度图表**：温度、湿度、PM2.5、甲醛、VOC、紫外线、噪音趋势图
- **时间范围选择**：支持自定义时间段查询
- **交互式图表**：支持滑动、缩放等交互操作
- **数据导出**：支持图表数据导出功能

###  AI 智能分析
- **环境数据分析**：基于历史数据进行智能分析
- **健康建议**：根据环境数据提供个性化建议
- **趋势预测**：分析数据变化趋势
- **对话式交互**：支持自然语言问答

## 🛠️技术栈

- **前端框架**：UniApp (Vue.js)
- **UI 组件**：ColorUI
- **图表库**：qiun-data-charts
- **云服务**：uniCloud
- **地图服务**：微信小程序地图 API
- **AI 服务**：集成第三方 AI 接口

##  项目结构

```
kqzl/
├── pages/                    # 页面文件
│   ├── index/               # 首页
│   │   └── index.vue
│   ├── Charts/              # 图表页面
│   │   └── Charts.vue
│   └── ai/                  # AI分析页面
│       └── ai.vue
├── components/              # 组件
│   ├── TimeSelector/        # 时间选择器
│   └── TimeRangePicker/     # 时间范围选择器
├── static/                  # 静态资源
│   ├── icons/              # 图标文件
│   └── images/             # 图片资源
├── colorui/                # ColorUI样式库
├── uniCloud-alipay/        # 云函数
│   ├── cloudfunctions/     # 云函数代码
│   └── database/           # 数据库配置
└── uni_modules/            # uni模块
```

## 🚀 快速开始

### 环境要求
- HBuilderX 3.0+
- Node.js 14+
- 微信开发者工具

### 安装步骤

1. **克隆项目**
   ```bash
   git clone [项目地址]
   cd kqzl
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **配置云服务**
   - 在 uniCloud 控制台创建项目
   - 配置云函数和数据库
   - 更新 `manifest.json` 中的 appid

4. **运行项目**
   - 使用 HBuilderX 打开项目
   - 选择运行到微信小程序
   - 在微信开发者工具中预览

## 📊 数据指标说明

### AQI 空气质量指数
- **优（0-50）**：空气质量令人满意
- **良（51-100）**：空气质量可接受
- **轻度污染（101-150）**：敏感人群需注意
- **中度污染（151-200）**：所有人群需注意
- **重度污染（201-300）**：健康警告
- **严重污染（300+）**：紧急情况

### UVI 紫外线指数
- **低等（0-2）**：安全，无需防护
- **中等（3-5）**：注意防护
- **高等（6-7）**：需要防护
- **很高（8-10）**：避免外出
- **极高（11+）**：危险等级

## 🔧 配置说明

### 云函数配置

1. **getToken**：获取设备认证令牌
2. **getDeviceData**：获取实时设备数据
3. **getHistoryData**：获取历史数据

### 环境变量

在 `common.js` 中配置：
```javascript
// API 配置
const API_CONFIG = {
  baseUrl: 'your-api-base-url',
  timeout: 10000
};

// 设备配置
const DEVICE_CONFIG = {
  deviceId: 'your-device-id',
  refreshInterval: 3000
};
```

## 🎨 主题定制

项目使用 ColorUI 作为 UI 框架，支持主题定制：

1. 修改 `colorui/main.css` 中的颜色变量
2. 在 `uni.scss` 中定义自定义样式
3. 使用 CSS 变量实现动态主题切换

## 📱 平台支持

- ✅ 微信小程序
- ✅ H5
- ✅ Android App
- ✅ iOS App
## 🐛 常见问题

### 1. 图表不显示数据
- 检查网络连接
- 确认云函数配置正确
- 查看控制台错误信息

### 2. 地图无法显示
- 确认已配置地图 API 密钥
- 检查定位权限设置
- 验证坐标数据格式

### 3. AI 分析功能异常
- 检查 AI 服务配置
- 确认网络连接稳定
- 查看 API 调用限制

## 🔄 更新日志

### v1.2.0 (2024-01-XX)
- ✨ 新增 UVI 紫外线指数计算
- 🎨 优化 UI 界面设计
- 📊 增强图表交互功能

### v1.1.0 (2024-01-XX)
- ✨ 新增 AI 智能分析功能
- 📊 优化图表显示效果
- 🔧 改进数据刷新机制

### v1.0.0 (2024-01-XX)
- 🎉 项目初始版本发布
- 📱 基础监测功能
- 📊 图表展示功能

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情


##  致谢

感谢以下开源项目的支持：
- [UniApp](https://uniapp.dcloud.io/)
- [ColorUI](https://github.com/weilanwl/ColorUI)
- [U-charts](https://www.ucharts.cn/)
- [Vue.js](https://vuejs.org/)

---